const Utilities={addClass:(a,b)=>{if(b)switch(b.constructor){case Array:b.map((b)=>b.classList.add(a));break;case String:for(const c=[...document.getElementsByClassName(b)];c.length;){let b=c.pop();b.classList.add(a)}break;default:throw new Error(`Could not add classNames from elements, check arguments`);}else throw new Error('Could not add classes, check arguments')},removeClass:(a,b)=>{if(b)switch(b.constructor){case Array:b.map((b)=>b.classList.remove(a));break;case String:console.log(b);for(const c=[...document.getElementsByClassName(b)];c.length;){let b=c.pop();b.classList.remove(a)}break;default:throw new Error(`Could not remove classNames from elements, check arguments`);}else if(a){const b=[...document.getElementsByClassName(a)];b.map((b)=>b.classList.remove(a))}else throw new Error('Could not manipulate classes, check arguments')},loadScript:(a,b)=>{let c=document.createElement('script'),d=!1;c.setAttribute('src',a),b&&(c.onreadystatechange=c.onload=()=>{d||b(),d=!0}),document.getElementsByTagName('head')[0].appendChild(c)}},Styles={cta:'#b14d61',ctaDarker:'#9e465b'},bindAll=(a)=>{let b=['constructor'],c=[];const d=(a,b,c)=>{let d=c.value;return{configurable:!0,get(){if(this===a||this.hasOwnProperty(b))return d;let c=d.bind(this);return Object.defineProperty(this,b,{value:c,configurable:!0,writable:!0}),c}}};if(a===void 0)throw new Error('bindAll Error: No context provided');let e=Object.getPrototypeOf(a);c=Object.getOwnPropertyNames(e),c.forEach((a)=>{let c=Object.getOwnPropertyDescriptor(e,a);return void 0===c?void console.warn(`bindAll Error: "${a}" not found in class`):void(-1!==b.indexOf(a)||'function'!=typeof c.value||Object.defineProperty(e,a,d(e,a,c)))})};document.addEventListener('DOMContentLoaded',()=>{const a=new class{constructor(a){this.container=a,this.init.bind(this),this.setToken.bind(this)}init(){let a=new mapboxgl.Map({container:this.container,style:'mapbox://styles/mapbox/streets-v10',minZoom:14,maxZoom:24,center:[153.02138889,-27.47797222],interactive:!1}),b=new mapboxgl.Marker;b.setLngLat([153.02138889,-27.47797222]).addTo(a)}setToken(){return new Promise((a,b)=>{let c=new XMLHttpRequest;c.open('GET','/map',!0),c.setRequestHeader('Content-Type','application/json'),c.onreadystatechange=()=>{if(4===c.readyState&&200===c.status){let b=JSON.parse(c.response);a(b.token)}403===c.status&&b('403 Forbidden')},c.send()})}}('map');Utilities.loadScript('https://api.mapbox.com/mapbox-gl-js/v0.44.2/mapbox-gl.js',()=>{a.setToken().then((a)=>window.mapboxgl.accessToken=a).then(()=>a.init())});const b={menuIcon:document.getElementById('menu'),nav:document.getElementsByClassName('nav')[0],navItems:[...document.querySelectorAll('.nav__link')],navigationBackground:document.getElementsByClassName('nav-bg')[0],menuContainer:document.querySelector('.menu-container')},c=new class{constructor(a){this.menuIcon=a.menuIcon,this.nav=a.nav,this.navItems=a.navItems,this.navigationBackground=a.navigationBackground,this.menuContainer=a.menuContainer,this.isOpen=!1,bindAll(this)}init(){this.navItems.map((a)=>{a.addEventListener('click',this.handleSelection)}),this.menuIcon.addEventListener('change',this.toggleMenu)}getToggleElements(){return[this.menuIcon,this.nav,this.navigationBackground,this.menuContainer]}handleSelection(){this.menuIcon.checked=!1,this.toggleMenu()}toggleMenu(){let a=this.getToggleElements();this.isOpen?Utilities.removeClass('active',a):Utilities.addClass('active',a),this.isOpen=!this.isOpen}}(b).init();class d{constructor(a,b,c){this.form=a,this.callback=b,this.rejectCallback=c,this.noValidate=!1,this.inputs={radio:[...a.elements].filter((a)=>'radio'===a.type),text:[...a.elements].filter((a)=>'text'===a.type||'textarea'===a.type||'email'===a.type),checkbox:[...a.elements].filter((a)=>'checkbox'===a.type)},this.init=this.init.bind(this),this.submit=this.submit.bind(this),this.reject=this.reject.bind(this),this.submitHandler=this.submitHandler.bind(this),this.isFormValid=this.isFormValid.bind(this),this.generateErrors=this.generateErrors.bind(this)}init(){this.form.addEventListener('submit',this.submitHandler)}submitHandler(a){a.preventDefault();let b=this.form.elements,c=this.isFormValid(b);return console.log(c),c?this.submit(b):this.reject(this.generateErrors()),!1}static checkRadioInputs(a){let b=new Set(a.map((a)=>a.name)).size,c=a.filter((a)=>a.checked).length;return b===c}static checkTextInputs(a){return!a.map((a)=>!a.required||!!a.value).includes(!1)}static checkCheckboxInputs(a){return!a.map((a)=>!a.required||a.checked).includes(!1)}static checkEmailInput(){}isFormValid(){if(!0===this.noValidate)return!0;let a=this.inputs.radio,b=this.inputs.text,c=this.inputs.checkbox,e=!a||d.checkRadioInputs(a),f=!b||d.checkTextInputs(b),g=!c||d.checkCheckboxInputs(c);return e&&f&&g}generateErrors(){let a=this.inputs.text.map((a)=>({name:a.name,valid:d.checkTextInputs([a]),type:'text'}));a=a.filter((a)=>!a.valid);let b=[...new Set(this.inputs.radio.map((a)=>{return a.name}))],c=b.map((a)=>this.form[a]);c=[...c],c=c.filter((a)=>!a.value),c=c.map((a)=>({name:a[0].name,valid:!!a.value,type:'radio'}));let e=this.inputs.checkbox.filter((a)=>!a.checked&&a.required);e=e.map((a)=>({name:a.name,valid:a.checked,type:'checkbox'}));let f=a.concat(c,e);return console.error(f),f}submit(a){console.log('submit callback'),this.callback&&this.callback(a)}reject(a){console.error('reject callback'),this.rejectCallback?this.rejectCallback(a):console.error(a)}}const e=new d(document.forms[0],(a)=>{let b=a.name.value,c=a.size.value||'',d=a.type.value||'coffee',e=document.querySelector('[data-nameSpan]'),f=document.querySelector('[data-orderSummarySpan]');(()=>{let a=document.getElementsByTagName('html')[0];a.classList.remove('reveal-slider'),void a.offsetWidth,a.classList.add('reveal-slider'),window.location.hash='#order'})(),e.textContent=b.toLowerCase(),f.textContent=`Your ${c} ${d} will be ready for you. Until then, we chillin'`;let g=[...document.querySelectorAll('[class^=\'section__order-form-container--\']')];g.forEach((a)=>a.classList.add('submitted'))},(a)=>{const b=document.querySelectorAll('[data-name="errors"]')[0];b.classList.contains('active')||b.classList.add('active');const c=b.querySelector('ul');c.innerHTML=a.map((a)=>`<li>${a.name}: ${a.name} is required.</li>`).join(' ')}).init(),f=new d(document.forms[1],()=>{const a=document.forms[1],b=document.querySelector('[data-name="contact-body"]'),c=document.getElementsByName('contact_submit')[0],d=document.querySelectorAll('[data-name="errors"]')[1];c.classList.add('btn--submitted'),c.classList.add('response'),d.classList.contains('active')&&d.classList.remove('active'),[...a.elements].forEach((a)=>a.setAttribute('disabled',!0))},(a)=>{const b=document.querySelectorAll('[data-name="errors"]')[1];b.classList.contains('active')||b.classList.add('active');const c=b.querySelector('ul');c.innerHTML=a.map((a)=>`<li>${a.name}: ${a.name.split('_').join(' ')} is required.</li>`).join(' ')}).init()});
